<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Update a rollup from a single leaf vertex — update_rollup • rollupTree</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Update a rollup from a single leaf vertex — update_rollup"><meta name="description" content="update_rollup() performs a minimal update of a data set assuming a single leaf element property
has changed. It performs updates along the path from that vertex to the root. There should be no difference
in the output from calling rollup() again. update_rollup() is perhaps more efficient and useful in an interactive context."><meta property="og:description" content="update_rollup() performs a minimal update of a data set assuming a single leaf element property
has changed. It performs updates along the path from that vertex to the root. There should be no difference
in the output from calling rollup() again. update_rollup() is perhaps more efficient and useful in an interactive context."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rollupTree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/rollupTree.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jsjuni/rollupTree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Update a rollup from a single leaf vertex</h1>
      <small class="dont-index">Source: <a href="https://github.com/jsjuni/rollupTree/blob/main/R/rollup.R" class="external-link"><code>R/rollup.R</code></a></small>
      <div class="d-none name"><code>update_rollup.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>update_rollup()</code> performs a minimal update of a data set assuming a single leaf element property
has changed. It performs updates along the path from that vertex to the root. There should be no difference
in the output from calling <code><a href="rollup.html">rollup()</a></code> again. <code>update_rollup()</code> is perhaps more efficient and useful in an interactive context.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">update_rollup</span><span class="op">(</span><span class="va">tree</span>, <span class="va">ds</span>, <span class="va">vertex</span>, <span class="va">update</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-tree">tree<a class="anchor" aria-label="anchor" href="#arg-tree"></a></dt>
<dd><p><code>igraph</code> directed graph that is a valid single-rooted in-tree
and whose vertex names are keys from the data set</p></dd>


<dt id="arg-ds">ds<a class="anchor" aria-label="anchor" href="#arg-ds"></a></dt>
<dd><p>data set to be updated; can be any object</p></dd>


<dt id="arg-vertex">vertex<a class="anchor" aria-label="anchor" href="#arg-vertex"></a></dt>
<dd><p>The start vertex</p></dd>


<dt id="arg-update">update<a class="anchor" aria-label="anchor" href="#arg-update"></a></dt>
<dd><p>function called at each vertex as update(ds,
parent_key, child_keys)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>updated input data set</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">update_rollup</span><span class="op">(</span><span class="va">wbs_tree</span>, <span class="va">wbs_table</span>, <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">wbs_tree</span><span class="op">)</span><span class="op">[</span><span class="st">"3.2"</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  update <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">p</span>, <span class="va">c</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">c</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">d</span><span class="op">[</span><span class="va">d</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"work"</span>, <span class="st">"budget"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">is.element</a></span><span class="op">(</span><span class="va">d</span><span class="op">$</span><span class="va">id</span>, <span class="va">c</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"work"</span>, <span class="st">"budget"</span><span class="op">)</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">sum</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="va">d</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     id  pid                    name work budget</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  top &lt;NA&gt; Construction of a House   NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1  top                Internal   NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    2  top              Foundation   NA     NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    3  top                External 30.4  83500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  1.1    1              Electrical 11.8  25000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  1.2    1                Plumbing 33.8  61000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2.1    2                Excavate 18.2  37000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2.2    2          Steel Erection  5.8   9000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  3.1    3            Masonry Work 16.2  62000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 3.2    3       Building Finishes 14.2  21500</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James Steven Jenkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

