<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Perform Recursive Computations • rollupTree</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Perform Recursive Computations">
<meta name="description" content="Mass rollup for a Bill of Materials is an example of a class of computations in which elements are arranged in a tree structure and some property of each element is a computed function of the corresponding values of its child elements. Leaf elements, i.e., those with no children, have values assigned. In many cases, the combining function is simple arithmetic sum; in other cases (e.g., mass properties), the combiner may involve other information such as the geometric relationship between parent and child, or statistical relations such as root-sum-of-squares (RSS). This package implements a general function for such problems. It is adapted to specific recursive computations by functional programming techniques; the caller passes a function as the update parameter to rollup() (or, at a lower level, passes functions as the get, set, combine, and override parameters to update_prop()) at runtime to specify the desired operations. The implementation relies on graph-theoretic algorithms from the igraph package of Csárdi, et al. (2006 &lt;doi:10.5281/zenodo.7682609&gt;).">
<meta property="og:description" content="Mass rollup for a Bill of Materials is an example of a class of computations in which elements are arranged in a tree structure and some property of each element is a computed function of the corresponding values of its child elements. Leaf elements, i.e., those with no children, have values assigned. In many cases, the combining function is simple arithmetic sum; in other cases (e.g., mass properties), the combiner may involve other information such as the geometric relationship between parent and child, or statistical relations such as root-sum-of-squares (RSS). This package implements a general function for such problems. It is adapted to specific recursive computations by functional programming techniques; the caller passes a function as the update parameter to rollup() (or, at a lower level, passes functions as the get, set, combine, and override parameters to update_prop()) at runtime to specify the desired operations. The implementation relies on graph-theoretic algorithms from the igraph package of Csárdi, et al. (2006 &lt;doi:10.5281/zenodo.7682609&gt;).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rollupTree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/rollupTree.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jsjuni/rollupTree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rolluptree">rollupTree<a class="anchor" aria-label="anchor" href="#rolluptree"></a>
</h1></div>
<!-- badges: start -->

<p>rollupTree implements a general function for computations in which some property of a parent element is a combination of corresponding properties of its child elements. The mass of an assembly, for example, is the sum of the masses of its subassemblies, and the mass of each subassembly is the sum of masses of its parts, etc.</p>
<p>rollupTree can perform computations specified by arbitrarily-shaped (but well-formed) trees, arbitrarily-defined properties and property-combining operations. Defaults are provided to simplify common cases (atomic numerical properties combined by summing), but functional programming techniques allow the caller to pass arbitrary update methods as required.</p>
<p>Despite its name, rollupTree can operate on directed acyclic graphs that are not trees if instructed to apply less stringent validation rules to its input.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rollupTree"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of rollupTree from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"jsjuni/rollupTree"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Suppose we have this data frame representing a work breakdown structure:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jsjuni.github.io/rollupTree/">rollupTree</a></span><span class="op">)</span></span>
<span><span class="va">wbs_table</span></span>
<span><span class="co">#&gt;     id  pid                    name budget</span></span>
<span><span class="co">#&gt; 1  top &lt;NA&gt; Construction of a House     NA</span></span>
<span><span class="co">#&gt; 2    1  top                Internal     NA</span></span>
<span><span class="co">#&gt; 3    2  top              Foundation     NA</span></span>
<span><span class="co">#&gt; 4    3  top                External     NA</span></span>
<span><span class="co">#&gt; 5  1.1    1              Electrical  25000</span></span>
<span><span class="co">#&gt; 6  1.2    1                Plumbing  61000</span></span>
<span><span class="co">#&gt; 7  2.1    2                Excavate  37000</span></span>
<span><span class="co">#&gt; 8  2.2    2          Steel Erection   9000</span></span>
<span><span class="co">#&gt; 9  3.1    3            Masonry Work  62000</span></span>
<span><span class="co">#&gt; 10 3.2    3       Building Finishes  21500</span></span></code></pre></div>
<p>and this tree with edges representing child-parent relations in the breakdown:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://r.igraph.org/reference/E.html" class="external-link">E</a></span><span class="op">(</span><span class="va">wbs_tree</span><span class="op">)</span></span>
<span><span class="co">#&gt; + 9/9 edges from dd17ef5 (vertex names):</span></span>
<span><span class="co">#&gt; [1] 1  -&gt;top 2  -&gt;top 3  -&gt;top 1.1-&gt;1   1.2-&gt;1   2.1-&gt;2   2.2-&gt;2   3.1-&gt;3  </span></span>
<span><span class="co">#&gt; [9] 3.2-&gt;3</span></span></code></pre></div>
<p>We can sum the budget numbers as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rollup.html">rollup</a></span><span class="op">(</span></span>
<span>  tree<span class="op">=</span><span class="va">wbs_tree</span>,</span>
<span>  ds<span class="op">=</span><span class="va">wbs_table</span>,</span>
<span>  update<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">d</span>, <span class="va">t</span>, <span class="va">s</span><span class="op">)</span> <span class="fu"><a href="reference/update_df_prop_by_id.html">update_df_prop_by_id</a></span><span class="op">(</span>df<span class="op">=</span><span class="va">d</span>, target<span class="op">=</span><span class="va">t</span>, sources<span class="op">=</span><span class="va">s</span>, prop<span class="op">=</span><span class="st">"budget"</span><span class="op">)</span>,</span>
<span>  validate_ds<span class="op">=</span><span class="kw">function</span><span class="op">(</span><span class="va">t</span>, <span class="va">d</span><span class="op">)</span> <span class="fu"><a href="reference/validate_df_by_id.html">validate_df_by_id</a></span><span class="op">(</span>tree<span class="op">=</span><span class="va">t</span>, df<span class="op">=</span><span class="va">d</span>, prop<span class="op">=</span><span class="st">"budget"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;     id  pid                    name budget</span></span>
<span><span class="co">#&gt; 1  top &lt;NA&gt; Construction of a House 215500</span></span>
<span><span class="co">#&gt; 2    1  top                Internal  86000</span></span>
<span><span class="co">#&gt; 3    2  top              Foundation  46000</span></span>
<span><span class="co">#&gt; 4    3  top                External  83500</span></span>
<span><span class="co">#&gt; 5  1.1    1              Electrical  25000</span></span>
<span><span class="co">#&gt; 6  1.2    1                Plumbing  61000</span></span>
<span><span class="co">#&gt; 7  2.1    2                Excavate  37000</span></span>
<span><span class="co">#&gt; 8  2.2    2          Steel Erection   9000</span></span>
<span><span class="co">#&gt; 9  3.1    3            Masonry Work  62000</span></span>
<span><span class="co">#&gt; 10 3.2    3       Building Finishes  21500</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rollupTree" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jsjuni/rollupTree/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jsjuni/rollupTree/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rollupTree</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>James Steven Jenkins <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-0725-0884" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=rollupTree" class="external-link"><img src="https://www.r-pkg.org/badges/version/rollupTree" alt="CRAN status"></a></li>
<li><a href="https://github.com/jsjuni/rollupTree/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jsjuni/rollupTree/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/jsjuni/rollupTree" class="external-link"><img src="https://codecov.io/gh/jsjuni/rollupTree/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James Steven Jenkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
